{% extends 'base.html' %}
{% load static %}
{% block content %}

<h1 class="text-center">Mis Ventas</h1>
<div class="bottom-footer">
  {% for v in query %}
  <div class="container jumbotron">
    <div class="row">
      <div class="col-lg-4 my-auto text-center">
        <img src={{v.imgcompra_set.all.0.imagen.url}} height="200" width="200" class="img-fluid border border-dark">
      </div>
      <div class="col-lg-4 my-auto">
       <h5 class="text-center">Nombre de la impresión:</h5><p class="text-center">{{v.nombre_impresion}}</p>
       <h5 class="text-center">Fecha de compra:</h5><p class="text-center">{{v.fecha_compra}}</p>
       {% if v.imgprueba_set.all.0 == None %}
       <div class="text-center">
       <a href="{% url 'subirImagenesPrueba_url' v.id %}" class="btn btn-dark ">Subir Pruebas de Envío</a></div>
       {% endif %}
      </div>
       <div class="col-lg-4 my-auto">
       <h5 class="text-center">Precio:</h5><p class="text-center">{{v.precio_impresion}}€</p>
       <h5 class="text-center">Comprador:</h5><p class="text-center">{{v.comprador}}</p>
       <h5 class="text-center">Direccion:</h5><p class="text-center">{{v.direccion}}</p>
      </div>
    <br>
  </div>
  {% empty %}
  <h1 class="text-center display-4">No has realizado ninguna venta</h1>
  {% endfor %}
</div>

<div class="container text-center">
  <ul class="pagination">
    {% if query.has_previous %}
      <li class="page-item"><a class="page-link" href="?page={{query.previous_page_number }}">Previous</a></li>
    {%else %}  
      <li class="page-item disabled">
        <span class="page-link">Previous</span>
      </li>
    {% endif %}
    {% for num in query.paginator.page_range %}
    {% ifequal num query.number %}
      <li class="page-item active">
        <span class="page-link">
          {{ num }}
          <span class="sr-only">(current)</span>
        </span>
      </li>
    {% else %}
      <li class="page-item"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
    {% endifequal %} 
  {% endfor %}
    {% if query.has_next %}
      <li class="page-item">
        <a class="page-link" href="?page={{query.next_page_number }}">Next</a>
      </li>
    {%else%}
    <li class="page-item disabled">
      <span class="page-link">Next</span>
    </li>
    {% endif %}
    
  </ul>
</div>
{% endblock %}

